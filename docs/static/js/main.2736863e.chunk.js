(this.webpackJsonpnotemarks=this.webpackJsonpnotemarks||[]).push([[0],{250:function(e,t,n){},251:function(e,t,n){},670:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),i=n.n(a),o=n(41),c=n.n(o),s=(n(250),n(11)),l=n.n(s),u=n(26),d=n(14),f=n(9),p=n(32),b=(n(251),n(675)),h=n(679),j=n(97),m=n(701),O=n(702),g=n(703),v=n(692),x=n(697),y=n(704),w=n(695),k=n(705),E=n(34),S=n(182),C=n.n(S);function N(e){Object(a.useEffect)(e,[])}var F=function(e,t,n){var r=Object(a.useCallback)(e,n);Object(a.useEffect)((function(){var e=setTimeout((function(){r()}),t);return function(){clearTimeout(e)}}),[r,t])};function L(){var e=Object(p.a)(["\n  flex-grow: 1;\n  height: 100%;\n"]);return L=function(){return e},e}function I(){var e=Object(p.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n"]);return I=function(){return e},e}function D(){var e=Object(p.a)(["\n  "," {\n    flex: 0 0 16px;\n    min-width: 16px;\n  }\n  "," {\n    flex: 0 0 16px;\n    min-width: 16px;\n  }\n  "," {\n    flex: 2 0 200px;\n    min-width: 200px;\n  }\n"]);return D=function(){return e},e}function M(){var e=Object(p.a)(["\n  "," {\n    flex: 1 1 576px;\n  }\n  "," {\n    flex: 1 1 576px;\n  }\n  "," {\n    flex: 1 1 768px;\n  }\n  "," {\n    flex: 1 1 992px;\n  }\n  "," {\n    flex: 0 1 1200px;\n  }\n"]);return M=function(){return e},e}function R(){var e=Object(p.a)(["\n  "," {\n    flex: 0 0 16px;\n    min-width: 16px;\n  }\n  "," {\n    flex: 0 0 16px;\n    min-width: 16px;\n  }\n  "," {\n    flex: 1 0 200px;\n    min-width: 200px;\n  }\n"]);return R=function(){return e},e}function T(){var e=Object(p.a)(["\n  display: flex;\n"]);return T=function(){return e},e}var U="@media (max-width: 576px)",A="@media (min-width: 576px)",P="@media (min-width: 768px)",z="@media (min-width: 992px)",B="@media (min-width: 1200px)",G=E.a.div(T()),q=E.a.div(R(),U,A,P),V=E.a.div(M(),U,A,P,z,B),_=E.a.div(D(),U,A,B);function W(e){var t=e.className,n=e.left,a=e.center,i=e.right,o=e.style;return Object(r.jsxs)(G,{className:t,style:o,children:[Object(r.jsx)(q,{children:n}),Object(r.jsx)(V,{children:a}),Object(r.jsx)(_,{children:i})]})}var H,K=E.a.div(I()),J=Object(E.a)(W)(L()),Y=n(82),$=n(690),Q=n(691),X=n(693);function Z(e){throw new Error("Unhandled case: "+e)}function ee(e,t){var n=Array();for(var r in e){var a=e[r];n.push(t(r,a))}return n}function te(e){return null!=e?e:null}function ne(e,t,n){if(e<=0)return-1;if(-1===t)return n>0?0:e-1;for(var r=t+n;r>=e;)r-=e;for(;r<0;)r+=e;return r}function re(e){if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e);var t=new e.constructor;for(var n in e)e.hasOwnProperty(n)&&(t[n]=re(e[n]));return t}function ae(){var e=Object(p.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  // It looks like it is equivalent to specify width/height or bottom/right\n  width: 100%;\n  height: 100%;\n  // bottom: 0;\n  // right: 0;\n\n  padding: 1px;\n"]);return ae=function(){return e},e}function ie(){var e=Object(p.a)(["\n  position: relative;\n  overflow: auto;\n  // This height specification is crucial as well, otherwise the box height\n  // collapses completely.\n  height: 100%;\n"]);return ie=function(){return e},e}!function(e){e.NoteMarkdown="NoteMarkdown",e.Link="Link",e.Document="Document"}(H||(H={}));var oe=function(){return Object(r.jsx)(Y.a,{image:Y.a.PRESENTED_IMAGE_SIMPLE,description:"No entry selected"})},ce=E.a.div(ie()),se=E.a.div(ae());function le(e){var t=e.children;return Object(r.jsx)(ce,{children:Object(r.jsx)(se,{children:t})})}function ue(e){var t=e.status;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)($.a,{style:{fontSize:16}}),Object(r.jsx)("span",{style:{position:"relative"},children:Object(r.jsx)("span",{style:{position:"absolute",left:"0px",top:"-6px",display:"inline-block",height:"7px",width:"7px",backgroundColor:"#f33756",borderRadius:"50%",transition:"all 0.2 linear",opacity:t?1:0}})})]})}function de(e){var t=e.entryKind,n=e.style;switch(t){case H.Link:return Object(r.jsx)(Q.a,{style:n});case H.NoteMarkdown:return Object(r.jsx)(v.a,{style:n});case H.Document:return Object(r.jsx)(X.a,{style:n});default:Z(t)}}var fe,pe=n(40),be=n(57),he=n(53),je=n(42),me=n(54),Oe=n(84),ge=n(682);function ve(e){return{key:Object(ge.a)(),name:"Default",userOrOrgName:"",repoName:"",enabled:!0,default:!!e,verified:fe.unknown}}function xe(e){return"github_".concat(e.userOrOrgName,"_").concat(e.repoName)}function ye(e){return e.filter((function(e){return e.enabled&&e.verified}))}function we(e){var t=e.find((function(e){return e.default}));return null!=t?t:e.length>0?e[0]:void 0}function ke(e,t){return"https://github.com/".concat(e.userOrOrgName,"/").concat(e.repoName,"/commit/").concat(t)}!function(e){e[e.unknown=0]="unknown",e[e.failed=1]="failed",e[e.success=2]="success",e[e.inProgress=3]="inProgress"}(fe||(fe={}));var Ee=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(me.a)(this,e),this.mapData=t}return Object(Oe.a)(e,[{key:"forEach",value:function(e){for(var t=0,n=Object.keys(this.mapData);t<n.length;t++){var r=n[t],a=this.mapData[r];e(a.repo,a.data)}}},{key:"map",value:function(e){for(var t=[],n=0,r=Object.keys(this.mapData);n<r.length;n++){var a=r[n],i=this.mapData[a],o=i.repo,c=i.data;t.push(e(o,c))}return t}},{key:"flatMap",value:function(e){for(var t=[],n=0,r=Object.keys(this.mapData);n<r.length;n++){var a,i=r[n],o=this.mapData[i],c=o.repo,s=o.data,l=Object(pe.a)(e(c,s));try{for(l.s();!(a=l.n()).done;){var u=a.value;t.push(u)}}catch(d){l.e(d)}finally{l.f()}}return t}},{key:"set",value:function(e,t){this.mapData[xe(e)]={repo:e,data:t}}},{key:"get",value:function(e){return this.mapData[xe(e)]}},{key:"getFromRepoId",value:function(e){return this.mapData[e]}},{key:"keys",value:function(){return Object.keys(this.mapData)}},{key:"values",value:function(){return Object.values(this.mapData)}},{key:"size",value:function(){return Object.keys(this.mapData).length}},{key:"clone",value:function(){return re(this)}}]),e}(),Se=n(168);function Ce(e){var t=function(e){return function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",r=""+e;r.length<t;)r=n+r;return r}(e,2)};return e.getFullYear().toString()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())}function Ne(e){function t(e){return e<10?"0"+e:e.toString()}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"  @  "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())}function Fe(){var e=new Date;return e.setMilliseconds(0),e}function Le(e){return Se.safeDump({labels:e.labels,timeCreated:Ce(e.timeCreated),timeUpdated:Ce(e.timeUpdated)})}function Ie(e){var t;try{t=Se.safeLoad(e)}catch(s){return Object(je.b)(s)}if(null==t)return Object(je.d)([]);if("object"!==typeof t)return Object(je.b)(new Error("Link data isn't an object."));var n=function(e){if(Array.isArray(e))return e}(t.links);if(null==n)return Object(je.b)(new Error("Link data field 'links' isn't an array."));var r,a=Object(pe.a)(n);try{for(a.s();!(r=a.n()).done;){var i=r.value,o=De(i.title),c=De(i.target);if(null==o)return Object(je.b)(new Error("Link data field 'title' isn't a string."));if(null==c)return Object(je.b)(new Error("Link data field 'target' isn't a string."));if("standalone"in i){if(null==Me(i.standalone))return Object(je.b)(new Error("Link data field 'standalone' isn't a boolean."))}else i.standalone=!1;if("ownLabels"in i){if(null==Te(i.ownLabels))return Object(je.b)(new Error("Link data field 'ownLabels' isn't an array of string."))}else i.ownLabels=[]}}catch(l){a.e(l)}finally{a.f()}return Object(je.d)(n)}function De(e){if("string"===typeof e)return e}function Me(e){if("boolean"===typeof e)return e}function Re(e){if("string"===typeof e)return function(e){var t=e.split("T");if(2===t.length){var n=Object(d.a)(t,2),r=n[0],a=n[1],i=r.split("-");if(3===i.length){var o=i.map((function(e){return parseInt(e)})),c=Object(d.a)(o,3),s=c[0],l=c[1],u=c[2];if(!(isNaN(s)||isNaN(l)||isNaN(u))){var f=a.split(".");if(1===f.length)f.push("0");else if(2!==f.length)return;var p=Object(d.a)(f,2),b=p[0],h=p[1],j=b.split(":");if(3===j.length){var m=j.map((function(e){return parseInt(e)})),O=Object(d.a)(m,3),g=O[0],v=O[1],x=O[2];if(!(isNaN(g)||isNaN(v)||isNaN(x))){var y=parseInt(h);if(!isNaN(y))return new Date(s,l-1,u,g,v,x,y)}}}}}}(e)}function Te(e){if(Array.isArray(e)&&e.every((function(e){return"string"===typeof e})))return e}var Ue,Ae=".notemarks",Pe="".concat(Ae,"/link_db.yaml");function ze(e){var t;return"md"===(null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase())?Ue.NoteMarkdown:Ue.Document}function Be(e){return"".concat(Ae,"/").concat(e,".yaml")}function Ge(e){var t=function(e){var t=e.lastIndexOf("/");return-1===t?["",e]:[e.substring(0,t),e.substring(t+1)]}(e),n=Object(d.a)(t,2),r=n[0],a=function(e){var t=e.lastIndexOf(".");return-1===t?[qe(e),""]:[qe(e.substring(0,t)),e.substring(t+1)]}(n[1]),i=Object(d.a)(a,2);return[r,i[0],i[1]]}function qe(e){for(var t="",n=!1,r=0;r<e.length;++r){var a=e[r];n?(t+=a,n=!1):"\u29f9"===a?n=!0:t+="\u29f8"===a?"/":a}return t}function Ve(e){var t=function(e){return e.replace(/\u29F9/g,"\u29f9\u29f9").replace(/\u29F8/g,"\u29f9\u29f8").replace(/\//g,"\u29f8")}(e.title);return""!==e.content.extension&&(t+="."+e.content.extension),t}function _e(e){return 0===e.content.location.trim().length?Ve(e):"".concat(e.content.location,"/").concat(Ve(e))}function We(e){var t=_e(e);return{path:t,metaPath:Be(t)}}function He(e){return null!=e.sha&&null!=e.rawUrl}function Ke(e){return null!=e.content&&He(e)}!function(e){e.NoteMarkdown="NoteMarkdown",e.Document="Document"}(Ue||(Ue={}));var Je=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(me.a)(this,e),this.map=t}return Object(Oe.a)(e,[{key:"setContent",value:function(e,t){e in this.map?this.map[e].content=t:this.map[e]={path:e,content:t}}},{key:"setFile",value:function(e,t){this.map[e]=t}},{key:"delete",value:function(e){delete this.map[e]}},{key:"get",value:function(e){return this.map[e]}},{key:"keys",value:function(){return Object.keys(this.map)}},{key:"values",value:function(){return Object.values(this.map)}},{key:"clone",value:function(){return re(this)}},{key:"forEach",value:function(e){for(var t=0,n=Object.values(this.map);t<n.length;t++){e(n[t])}}}]),e}(),Ye=Ee;function $e(e){var t,n=new Je,r=Object(pe.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.setFile(a.path,a)}}catch(i){r.e(i)}finally{r.f()}return n}var Qe,Xe=n(169),Ze=n.n(Xe),et=n(211),tt=n.n(et),nt=n(212);n(494);function rt(e){var t=function(e){var t=new Ze.a.Converter({ghCodeBlocks:!0,extensions:["highlightjs"],simplifiedAutoLink:!0,strikethrough:!0,tables:!0,tasklists:!0,openLinksInNewWindow:!0}).makeHtml(e);return tt.a.sanitize(t,{ADD_ATTR:["target"]})}(e);return[t,function(e){var t=(new DOMParser).parseFromString(e,"text/html").querySelectorAll("a"),n=[];return t.forEach((function(e){var t,r=null===(t=e.getAttribute("href"))||void 0===t?void 0:t.trim();null==r||r.startsWith("#")||n.push(r)})),n}(t)]}function at(e){var t,n=[],r={},a=Object(pe.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value.replace(/^\/+|\/+$/g,"");i in r||""===i||(n.push(i),r[i]=!0)}}catch(o){a.e(o)}finally{a.f()}return n.sort(),n}function it(e){return at(e.split(/\s/))}function ot(e,t){if(e=at(e),t=at(t),e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function ct(e,t){return t.some((function(t){return function(e,t){if(e===t)return!0;var n=e.split("/"),r=t.split("/");if(n.length>r.length)return!1;for(var a=0;a<n.length;++a)if(n[a]!==r[a])return!1;return!0}(e,t)}))}function st(e,t){for(var n=e.split("/"),r=0;r<n.length;++r){t(n[r],n.slice(0,r+1).join("/"),n.slice(0,r))}}function lt(e){var t,n={},r=Object(pe.a)(e);try{for(r.s();!(t=r.n()).done;){var a,i=t.value,o=Object(pe.a)(i.labels);try{for(o.s();!(a=o.n()).done;){var c=a.value;st(c,(function(e,t,r){var a,i=n,o=Object(pe.a)(r);try{for(o.s();!(a=o.n()).done;){i=i[a.value].children}}catch(c){o.e(c)}finally{o.f()}i.hasOwnProperty(e)?i[e].count+=1:i[e]={count:1,children:{}}}))}}catch(s){o.e(s)}finally{o.f()}}}catch(s){r.e(s)}finally{r.f()}return n}function ut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=ee(e,(function(e,r){var a=[].concat(Object(be.a)(n),[e]),i=a.join("/");return{baseName:e,fullName:i,children:ut(r.children,t,a),count:r.count,priority:t[i]||0}}));return r=r.sort((function(e,t){return e.baseName.toLowerCase().localeCompare(t.baseName.toLowerCase())}))}function dt(e){var t=lt(e);return ut(t)}Ze.a.extension("highlightjs",(function(){function e(e,t,n,r){return t=t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),'<pre class="hljs"><code>','<pre class="hljs"><code>'+nt.highlightAuto(t).value+r}return[{type:"output",filter:function(t,n,r){return Ze.a.helper.replaceRecursiveRegExp(t,e,"<pre><code\\b[^>]*>","</code></pre>","g")}}]}));var ft=(Qe={},Object(he.a)(Qe,H.NoteMarkdown,0),Object(he.a)(Qe,H.Document,1),Object(he.a)(Qe,H.Link,2),Qe);function pt(e){if((n=e.content).kind===H.Document||n.kind===H.NoteMarkdown){var t=_e(e);e.key="".concat(e.content.repo.key,":").concat(t)}else e.key="__link_".concat(e.content.target);var n;return e}function bt(e){return e.content.kind===H.Document}function ht(e){return e.content.kind===H.NoteMarkdown}function jt(e){return e.content.kind===H.Link}function mt(e){if(e.content.kind===H.NoteMarkdown)return e.content.text}function Ot(e){var t=[],n=e.clone();return e.forEach((function(e,r){r.forEach((function(a){if(a.path.startsWith(Ae))Ke(a)||console.log(a);else{var i=Be(a.path),o=r.get(i),c=!1;if(null!=o&&null!=o.content){var s=function(e){var t;try{t=Se.safeLoad(e)}catch(i){return Object(je.b)(i)}if("object"!==typeof t)return Object(je.b)(new Error("Meta data isn't an object."));var n=Te(t.labels),r=Re(t.timeCreated),a=Re(t.timeUpdated);return null==n?Object(je.b)(new Error("Meta data field 'labels' isn't an string array.")):null==r?Object(je.b)(new Error("Meta data field 'timeCreated' cannot be parsed.")):null==a?Object(je.b)(new Error("Meta data field 'timeUpdated' cannot be parsed.")):Object(je.d)({labels:n,timeCreated:r,timeUpdated:a})}(o.content);if(s.isOk()){var l=gt(e,a,s.value);null!=l&&t.push(l)}else c=!0}else null!=o&&null!=o.error?console.log("Skipping entry extraction for ".concat(a.path," because associated meta couldn't be fetched.")):c=!0;if(c){var u,d=function(){var e=Fe();return{labels:[],timeCreated:e,timeUpdated:e}}(),f=Le(d),p=gt(e,a,d);if(null!=p)t.push(p),null===(u=n.get(e))||void 0===u||u.data.setContent(i,f)}}}))})),[t,n]}function gt(e,t,n){var r,a=ze(t.path),i=Ge(t.path),o=Object(d.a)(i,3),c=o[0],s=o[1],l=o[2];if(a===Ue.NoteMarkdown&&Ke(t)){var u=t.content,f=rt(u),p=Object(d.a)(f,2),b=p[0],h=p[1];r={kind:a,repo:e,location:c,extension:l,timeCreated:n.timeCreated,timeUpdated:n.timeUpdated,rawUrl:t.rawUrl,text:u,html:b,links:h}}else{if(a!==Ue.Document||!He(t))return void console.log("ERROR: Could not create file entry for:",t);r={kind:a,repo:e,location:c,extension:l,timeCreated:n.timeCreated,timeUpdated:n.timeUpdated,rawUrl:t.rawUrl}}return pt({title:s,priority:0,labels:n.labels,content:r})}function vt(e){var t=[];return e.forEach((function(e,n){var r=n.get(Pe);if(null!=r&&null!=r.content){var a=function(e,t){return(null!=t?Ie(t):Object(je.d)([])).map((function(t){return t.map((function(t){return pt({title:t.title,priority:0,labels:t.ownLabels,content:{kind:H.Link,target:t.target,referencedBy:[],standaloneRepo:t.standalone?e:void 0,refRepos:[],refLocations:[],ownLabels:t.ownLabels}})}))}))}(e,r.content);a.isOk()&&(t=[].concat(Object(be.a)(t),Object(be.a)(a.value)))}})),t}function xt(e,t){console.time("stageLinkDBUpdate"),t.forEach((function(t,n){var r=function(e,t){return function(e){var t=["links:"];if(0===(e=Object(be.a)(e).sort((function(e,t){return e.target.localeCompare(t.target)}))).length)t.push("  []");else{var n,r=Object(pe.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;t.push("  - title: "+JSON.stringify(a.title)),t.push("    target: "+JSON.stringify(a.target)),a.standalone&&t.push("    standalone: true"),a.ownLabels.length>0&&t.push("    ownLabels: "+JSON.stringify(a.ownLabels))}}catch(i){r.e(i)}finally{r.f()}}return t.push(""),t.join("\n")}(t.filter((function(t){return t.content.refRepos.some((function(t){return xe(t)===xe(e)}))||null!=t.content.standaloneRepo&&xe(t.content.standaloneRepo)===xe(e)})).map((function(t){return{title:t.title,target:t.content.target,ownLabels:t.content.ownLabels,standalone:null!=t.content.standaloneRepo&&xe(t.content.standaloneRepo)===xe(e)}})))}(t,e);n.setContent(Pe,r)})),console.timeEnd("stageLinkDBUpdate")}function yt(e){return{labels:e.labels,timeCreated:e.content.timeCreated,timeUpdated:e.content.timeUpdated}}function wt(e,t){return e.some((function(e){return xe(e)===xe(t)}))||e.push(t),e}function kt(e,t){return e.some((function(e){return e===t}))||e.push(t),e}function Et(e,t){var n=function(e,t){console.time("link extraction");var n,r=[],a={},i={},o=Object(pe.a)(t);try{for(o.s();!(n=o.n()).done;){var c=n.value;c.content.referencedBy=[],c.content.refRepos=[],c.content.refLocations=[],c.labels=c.content.ownLabels.slice(0),c.content.target in a?console.log("WARNING: Existing links contains duplicate ".concat(c.content.target,". Discarding.")):(null!=c.content.standaloneRepo&&(r.push(c),i[c.content.target]=!0),a[c.content.target]=c)}}catch(O){o.e(O)}finally{o.f()}var s,l,u,d=Object(pe.a)(e);try{for(d.s();!(s=d.n()).done;){var f=s.value;if(ht(f)){var p,b=Object(pe.a)(f.content.links);try{for(b.s();!(p=b.n()).done;){var h=p.value;if(h in a){var j=a[h];j.content.referencedBy.push(f),j.content.refRepos=wt(j.content.refRepos,f.content.repo),j.content.refLocations=kt(j.content.refLocations,f.content.location),j.labels=(l=j.labels,u=f.labels,at([].concat(Object(be.a)(l),Object(be.a)(u)))),h in i||(r.push(j),i[j.content.target]=!0)}else{var m=pt({title:h,priority:0,labels:f.labels.slice(0),content:{kind:H.Link,target:h,referencedBy:[f],refRepos:[f.content.repo],refLocations:[f.content.location],ownLabels:[]}});r.push(m),i[h]=!0,a[h]=m}}}catch(O){b.e(O)}finally{b.f()}}}}catch(O){d.e(O)}finally{d.f()}return console.timeEnd("link extraction"),r}(e,t),r=[].concat(Object(be.a)(e),Object(be.a)(n));return function(e){e.sort((function(e,t){return e.content.kind!==t.content.kind?ft[e.content.kind]-ft[t.content.kind]:e.title.toLowerCase().localeCompare(t.title.toLowerCase())}));for(var t=0;t<e.length;++t)e[t].idx=t}(r),[n,r]}var St=n(66);function Ct(){return{repos:[ve(!0)],auth:{},editor:{fontSize:12,theme:"dark",wordWrap:"bounded",wordWrapColumn:100}}}function Nt(e,t){return Object(f.a)(Object(f.a)({},e),t)}var Ft,Lt=function(){function e(t){Object(me.a)(this,e),this.key=t}return Object(Oe.a)(e,[{key:"isAuthenticated",value:function(){return null!=this.key}},{key:"storeSettings",value:function(e){null!=this.key&&function(e,t){Wt.apply(this,arguments)}(e.auth,this.key);var t=Object(f.a)({},e);delete t.auth,window.localStorage.setItem("settings",JSON.stringify(t))}},{key:"loadSettings",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={deserializationFailed:!1,validationFailed:!1,loadAuthFailed:!1},r=this.loadNormalSettings(n),e.next=4,this.loadAuthSettings(n,t);case 4:return a=e.sent,i=Object(f.a)(Object(f.a)({},r),{},{auth:a}),e.abrupt("return",{settings:i,status:n});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadNormalSettings",value:function(e){var t=window.localStorage.getItem("settings");return null!=t?JSON.parse(t):(e.deserializationFailed=!0,Ct())}},{key:"loadAuthSettings",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.key&&!n){e.next=4;break}return e.abrupt("return",{});case 4:return e.next=6,Ht(this.key);case 6:if(null==(r=e.sent)){e.next=11;break}return e.abrupt("return",r);case 11:return t.loadAuthFailed=!0,e.abrupt("return",{});case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function It(){for(var e in St.clear(),window.localStorage)delete window.localStorage[e]}function Dt(){var e=new Uint8Array(16);return window.crypto.getRandomValues(e),e}function Mt(){return Rt.apply(this,arguments)}function Rt(){return(Rt=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St.getItem("salt");case 2:if(null==(t=e.sent)){e.next=7;break}return e.abrupt("return",t);case 7:return t=Dt(),e.next=10,St.setItem("salt",t);case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tt(e){return(new TextEncoder).encode(e)}function Ut(e){return(new TextDecoder).decode(e)}function At(e,t){return Pt.apply(this,arguments)}function Pt(){return(Pt=Object(u.a)(l.a.mark((function e(t,n){var r,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=1e4,e.next=3,window.crypto.subtle.importKey("raw",Tt(t),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]);case 3:return a=e.sent,e.next=6,window.crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:r,hash:"SHA-256"},a,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zt(e){return Bt.apply(this,arguments)}function Bt(){return(Bt=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt();case 2:return n=e.sent,e.abrupt("return",At(t,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gt(e,t){return qt.apply(this,arguments)}function qt(){return(qt=Object(u.a)(l.a.mark((function e(t,n){var r,a,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tt(t),a=crypto.getRandomValues(new Uint8Array(16)),i={name:"AES-GCM",iv:a},e.t0=Uint8Array,e.next=6,crypto.subtle.encrypt(i,n,r);case 6:return e.t1=e.sent,o=new e.t0(e.t1),e.abrupt("return",[o,a]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vt(e,t,n){return _t.apply(this,arguments)}function _t(){return(_t=Object(u.a)(l.a.mark((function e(t,n,r){var a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:"AES-GCM",iv:r},e.prev=1,e.next=4,crypto.subtle.decrypt(a,n,t);case 4:return i=e.sent,e.abrupt("return",Ut(i));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",void 0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function Wt(){return(Wt=Object(u.a)(l.a.mark((function e(t,n){var r,a,i,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.stringify(t),e.next=3,Gt(r,n);case 3:return a=e.sent,i=Object(d.a)(a,2),o=i[0],c=i[1],e.next=9,St.setItem("auth_data",o);case 9:return e.next=11,St.setItem("auth_nonce",c);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ht(e){return Kt.apply(this,arguments)}function Kt(){return(Kt=Object(u.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St.getItem("auth_data");case 2:return n=e.sent,e.next=5,St.getItem("auth_nonce");case 5:if(r=e.sent,null==n||null==r){e.next=12;break}return e.next=9,Vt(n,t,r);case 9:if(null==(a=e.sent)){e.next=12;break}return e.abrupt("return",JSON.parse(a));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jt(){return Yt.apply(this,arguments)}function Yt(){return(Yt=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St.getItem("auth_data");case 2:return t=e.sent,e.next=5,St.getItem("auth_nonce");case 5:return n=e.sent,e.abrupt("return",null!=t&&null!=n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e.Write="write",e.Remove="remove",e.Move="move"}(Ft||(Ft={}));var $t=Ee;function Qt(e,t){console.time("diffMultiFileMaps");var n,r=new $t,a={},i=Object(pe.a)(e.keys());try{for(i.s();!(n=i.n()).done;){var o=n.value;a[o]=e.getFromRepoId(o).repo}}catch(m){i.e(m)}finally{i.f()}var c,s=Object(pe.a)(t.keys());try{for(s.s();!(c=s.n()).done;){var l=c.value;a[l]=t.getFromRepoId(l).repo}}catch(m){s.e(m)}finally{s.f()}for(var u=0,d=Object.values(a);u<d.length;u++){var f,p,b=d[u],h=null===(f=e.get(b))||void 0===f?void 0:f.data,j=null===(p=t.get(b))||void 0===p?void 0:p.data;null!=h&&null!=j&&r.set(b,Xt(h,j))}return console.timeEnd("diffMultiFileMaps"),r}function Xt(e,t){var n=[],r=function(e){var t={};return e.forEach((function(e){null!=e.content&&(t[e.content]=e)})),t}(e),a={};return t.forEach((function(t){var i=e.get(t.path),o=!1;if(null!=i)i.content!==t.content&&(o=!0);else{var c=r[t.content];null==c?o=!0:(n.push({kind:Ft.Move,pathSrc:c.path,pathDst:t.path}),a[c.path]=!0)}o&&n.push({kind:Ft.Write,path:t.path,content:t.content})})),e.forEach((function(e){null!=t.get(e.path)||e.path in a||n.push({kind:Ft.Remove,path:e.path})})),n}var Zt=n(136);function en(e){return je.a.fromPromise(e,(function(e){return e}))}function tn(e,t){return je.a.fromPromise(e,(function(e){return console.log(t,e),{msg:t,originalError:e}}))}function nn(e,t){return rn.apply(this,arguments)}function rn(){return(rn=Object(u.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Zt.a({auth:n.tokenGitHub}),e.next=3,en(r.repos.getContent({owner:t.userOrOrgName,repo:t.repoName,path:"."}));case 3:if(!(a=e.sent).isOk()){e.next=9;break}return console.log("Verification succeeded."),e.abrupt("return",!0);case 9:return console.log("Verification failed:"),console.log(a.error),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function an(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}function on(e,t,n,r){var a="".concat(n,"_").concat(r);return tn(St.getItem(a),"Failed to get item from local storage.").andThen((function(i){return null!=i?Object(je.e)(i):tn(e.repos.getContent({owner:t.userOrOrgName,repo:t.repoName,path:n}),"Failure during fetching file from GitHub.").andThen((function(e){if(console.log("".concat(a," fetched successfully")),e.data.sha!==r)return Object(je.b)({msg:"Downloaded SHA does not match."});if("base64"!==e.data.encoding)return Object(je.b)({msg:"GitHub API returned content that is not base64 encoded but: ".concat(e.data.encoding,".")});var t=an(e.data.content);return St.setItem(a,t),Object(je.d)(t)}))}))}function cn(e,t,n,r,a){return sn.apply(this,arguments)}function sn(){return(sn=Object(u.a)(l.a.mark((function e(t,n,r,a,i){var o,c,s,u,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("recursiveListFiles",r),e.next=3,tn(t.repos.getContent({owner:n.userOrOrgName,repo:n.repoName,path:r}),"octokit.repos.getContent");case 3:if(!(o=e.sent).isOk()){e.next=29;break}c=o.value.data,s=Object(pe.a)(c),e.prev=7,s.s();case 9:if((u=s.n()).done){e.next=19;break}if("dir"!==(d=u.value).type){e.next=16;break}return e.next=14,cn(t,n,d.path,a,i);case 14:e.next=17;break;case 16:"file"===d.type&&a.push({path:d.path,sha:d.sha,rawUrl:d.download_url});case 17:e.next=9;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(7),s.e(e.t0);case 24:return e.prev=24,s.f(),e.finish(24);case 27:e.next=32;break;case 29:console.log("WARNING: Failed to get repo content:"),console.log(o.error.originalError),i.push(o.error);case 32:case"end":return e.stop()}}),e,null,[[7,21,24,27]])})))).apply(this,arguments)}function ln(e,t,n,r){return un.apply(this,arguments)}function un(){return(un=Object(u.a)(l.a.mark((function e(t,n,r,a){var i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],e.next=3,cn(t,n,r,i,a);case 3:return e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dn(e,t,n){return fn.apply(this,arguments)}function fn(){return(fn=Object(u.a)(l.a.mark((function e(t,n,r){var a,i,o,c,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ln(t,n,".",r);case 2:a=e.sent,i=[],o=Object(pe.a)(a);try{for(s=function(){var e=c.value;ze(e.path)!==Ue.Document||e.path.startsWith(Ae)?i.push(on(t,n,e.path,e.sha).map((function(t){return{path:e.path,sha:e.sha,rawUrl:e.rawUrl,content:t}})).mapErr((function(t){return{path:e.path,sha:e.sha,rawUrl:e.rawUrl,error:t}}))):i.push(Object(je.e)({path:e.path,sha:e.sha,rawUrl:e.rawUrl}))},o.s();!(c=o.n()).done;)s()}catch(l){o.e(l)}finally{o.f()}return e.next=8,Promise.all(i);case 8:return u=e.sent,e.abrupt("return",u.map((function(e){return e.isOk()?e.value:e.error})));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pn(e,t){return bn.apply(this,arguments)}function bn(){return(bn=Object(u.a)(l.a.mark((function e(t,n){var r,a,i,o,c,s,u,f,p,b,h,j,m,O,g;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Loading contents from ".concat(t.length," repos")),r=[],a=new Ye,i=Object(pe.a)(t),e.prev=4,i.s();case 6:if((o=i.n()).done){e.next=18;break}return c=o.value,s=new Zt.a({auth:n.tokenGitHub}),e.next=11,dn(s,c,r);case 11:u=e.sent,f=$e(u),a.set(c,f),p=Object(pe.a)(u);try{for(p.s();!(b=p.n()).done;)null!=(h=b.value).error&&r.push(h.error)}catch(l){p.e(l)}finally{p.f()}case 16:e.next=6;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(4),i.e(e.t0);case 23:return e.prev=23,i.f(),e.finish(23);case 26:return j=Ot(a),m=Object(d.a)(j,2),O=m[0],g=m[1],r.length>0&&(console.log("Fetch errors occurred:"),console.log(r)),e.abrupt("return",[O,a,g,r]);case 29:case"end":return e.stop()}}),e,null,[[4,20,23,26]])})))).apply(this,arguments)}function hn(e,t,n){var r=e.content.repo,a=_e(e);return tn(new Zt.a({auth:t.tokenGitHub}).repos.getContent({owner:r.userOrOrgName,repo:r.repoName,path:a}),"Could not fetch file '".concat(a,"'.")).map((function(e){var t=e.data.content;return n?an(t):e.data.content}))}function jn(e,t,n,r){var a,i,o,c=new Zt.a({auth:e.tokenGitHub});return Object(je.e)(null).andThen((function(){return function(e,t){return tn(e.repos.get({owner:t.userOrOrgName,repo:t.repoName}),"Failed to get default branch.")}(c,t)})).andThen((function(e){return o=e.data.default_branch,function(e,t,n){return tn(e.git.getRef({owner:t.userOrOrgName,repo:t.repoName,ref:"heads/".concat(n)}),"Failed to get head ref.")}(c,t,o)})).andThen((function(e){return a=e.data.object.sha,function(e,t,n){return tn(e.git.getCommit({owner:t.userOrOrgName,repo:t.repoName,commit_sha:n}),"Failed to get head commit.")}(c,t,a)})).andThen((function(e){var n=e.data.tree.sha;return function(e,t,n){return tn(e.git.getTree({owner:t.userOrOrgName,repo:t.repoName,tree_sha:n,recursive:"true"}),"Failed to get tree with sha ".concat(n,"."))}(c,t,n)})).andThen((function(e){if(e.data.truncated)return Object(je.c)({msg:"Tree has been truncated -- handling that many files is not supported yet.",error:null});var r=e.data,a=function(e,t){var n,r=[],a=Object(pe.a)(t.tree);try{for(a.s();!(n=a.n()).done;){var i,o=n.value,c=!0,s=o.path,l=Object(pe.a)(e);try{for(l.s();!(i=l.n()).done;){var u=i.value;if("move"!==u.kind&&u.path===o.path){c=!1;break}"move"===u.kind&&u.pathSrc===o.path&&(s=u.pathDst)}}catch(b){l.e(b)}finally{l.f()}"tree"===o.type&&(c=!1),c&&r.push({path:s,mode:o.mode,type:o.type,sha:o.sha})}}catch(b){a.e(b)}finally{a.f()}var d,f=Object(pe.a)(e);try{for(f.s();!(d=f.n()).done;){var p=d.value;"write"===p.kind&&r.push({path:p.path,mode:"100644",type:"blob",content:p.content})}}catch(b){f.e(b)}finally{f.f()}return r}(n,r);return console.log(r),console.log(a),function(e,t,n){return tn(e.git.createTree({owner:t.userOrOrgName,repo:t.repoName,tree:n}),"Failed to create tree.")}(c,t,a)})).andThen((function(e){var n=e.data.sha;return function(e,t,n,r,a){return tn(e.git.createCommit({owner:t.userOrOrgName,repo:t.repoName,message:n,parents:[r],tree:a}),"Failed to create commit.")}(c,t,r,a,n)})).andThen((function(e){return i=e.data.sha,function(e,t,n,r){return tn(e.git.updateRef({owner:t.userOrOrgName,repo:t.repoName,ref:n,sha:r,force:!0}),"Failed to update ref.")}(c,t,"heads/".concat(o),i)})).map((function(){return i}))}function mn(e){try{return new URL(e).hostname}catch(t){return}}function On(e){var t=/\\"title\\":\\"(.*?)\\"/g.exec(e);if(t)return"YouTube \u2013 "+t[1]}var gn=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.text();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vn=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://cors-anywhere.herokuapp.com/".concat(t.replace("http://","").replace("https://","")),e.abrupt("return",gn(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xn=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vn(t);case 3:if(n=e.sent,"www.youtube.com"!==mn(t)){e.next=9;break}if(void 0===(r=On(n))){e.next=9;break}return e.abrupt("return",r);case 9:return a=(new DOMParser).parseFromString(n,"text/html"),i=a.querySelectorAll("title")[0],e.abrupt("return",i.innerText);case 14:return e.prev=14,e.t0=e.catch(0),console.log("Failed to request title:",e.t0),e.abrupt("return",void 0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();function yn(e,t,n){var r=function(e){switch(e=e.toLowerCase()){case"pdf":return"application/pdf";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"svg":return"image/svg";case"zip":return"application/zip";default:return"application/octet-stream"}}(t),a=document.createElement("a");a.setAttribute("href","data:".concat(r,";base64,").concat(n)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}function wn(){window.gtag("event","login",{})}function kn(){window.gtag("event","demo",{})}var En=n(683),Sn=n(61),Cn=n(120),Nn=n(694),Fn=n(681),Ln=n(687);function In(){var e=Object(p.a)(["\n  color: whitesmoke;\n  background: #464648;\n  border-color: #111;\n\n  // To prevent double click selection: https://stackoverflow.com/a/7018415/1804173\n  user-select: none;\n"]);return In=function(){return e},e}var Dn=Object(E.a)(Ln.a)(In());function Mn(){var e=Object(p.a)(["\n  position: relative;\n  bottom: -0.25em;\n  margin-left: 0.3rem;\n  font-size: 0.5rem;\n  font-weight: bold;\n\n  /* Pretend height is zero to avoid adding to height of tag */\n  display: inline-block;\n  height: 0;\n  overflow: visible;\n"]);return Mn=function(){return e},e}function Rn(){var e=Object(p.a)(["\n  position: absolute;\n  bottom: 0;\n  right: 0.1rem;\n  width: 4px;\n  height: 1rem;\n  border-radius: 4px;\n\n  background: #e2ebf5;\n  transition: all 0.2s linear;\n"]);return Rn=function(){return e},e}function Tn(){var e=Object(p.a)(["\n  position: relative;\n\n  .included {\n    background: hsl(141, 53%, 53%);\n  }\n\n  .excluded {\n    background: hsl(348, 86%, 61%);\n  }\n"]);return Tn=function(){return e},e}function Un(){var e=Object(p.a)(["\n  // This follows the breakpoint that ensures the left sidebar is at least 200px\n  @media not all and (min-width: 768px) {\n    display: none;\n  }\n"]);return Un=function(){return e},e}var An=Object(E.a)(Fn.a)(Un()),Pn=E.a.span(Tn()),zn=E.a.span(Rn()),Bn=E.a.span(Mn());function Gn(e,t,n){return{title:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Pn,{children:Object(r.jsx)(zn,{ref:function(n){var r;t[e.fullName]={element:n,state:(null===(r=t[e.fullName])||void 0===r?void 0:r.state)||0}}})}),Object(r.jsxs)(Dn,{onClick:function(t){n(e,!0),t.preventDefault()},onContextMenu:function(t){n(e,!1),t.preventDefault()},children:[e.baseName,Object(r.jsx)(Bn,{children:e.count})]})]}),key:e.fullName,children:e.children.map((function(e){return Gn(e,t,n)}))}}var qn=i.a.memo((function(e){var t=e.labels,n=e.onSetLabelFilter,i=e.onRegainFocus,o=Object(a.useRef)({});function c(e,t){var r=o.current[e.fullName];null!=r&&null!=r.element&&(t?r.state<0?(r.element.classList.remove("excluded"),r.element.classList.add("included"),r.state=1,n(e,1)):0===r.state?(r.element.classList.add("included"),r.state=1,n(e,1)):(r.element.classList.remove("included"),r.state=0,n(e,0)):r.state>0?(r.element.classList.remove("included"),r.element.classList.add("excluded"),r.state=-1,n(e,-1)):0===r.state?(r.element.classList.add("excluded"),r.state=-1,n(e,-1)):(r.element.classList.remove("excluded"),r.state=0,n(e,0))),i()}var s=t.map((function(e){return Gn(e,o.current,c)}));return Object(r.jsx)(An,{treeData:s,selectable:!1,checkable:!1})}));function Vn(){var e=Object(p.a)(["\n  vertical-align: baseline;\n  flex: 0 0 50%;\n"]);return Vn=function(){return e},e}function _n(){var e=Object(p.a)(["\n  padding-left: 8px;\n  padding-right: 8px;\n  height: 22px;\n  line-height: 22px;\n"]);return _n=function(){return e},e}function Wn(){var e=Object(p.a)(["\n  flex-grow: 1;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  height: 22px;\n  line-height: 22px;\n  vertical-align: bottom;\n  padding-left: 8px;\n"]);return Wn=function(){return e},e}function Hn(){var e=Object(p.a)(["\n  padding-top: 4px;\n  padding-bottom: 4px;\n  display: flex;\n  vertical-align: baseline;\n"]);return Hn=function(){return e},e}function Kn(){var e=Object(p.a)(["\n  font-size: 11px;\n  cursor: pointer;\n\n  .highlight-row {\n    background: #e8f6fe; /* Antd's select color used e.g. in AutoComplete */\n\n    /* Implement highlight border via box shadow to avoid messing with box sizes (see alternative below) */\n    border-radius: 3px;\n    box-shadow: 0px 0px 0px 1px #b0e0fc;\n\n    /* Since we are using box-sizing: border-box, we need to counter the border with negative margins */\n    //border: 1px solid #b0e0fc;\n    //margin-top: -1px;\n    //margin-bottom: -1px;\n    //margin-left: -1px;\n    //margin-right: -1px;\n  }\n"]);return Kn=function(){return e},e}function Jn(){var e=Object(p.a)(["\n  margin-top: 20px;\n"]);return Jn=function(){return e},e}function Yn(){var e=Object(p.a)(["\n  margin-top: 20px;\n  margin-bottom: 20px;\n"]);return Yn=function(){return e},e}function $n(){var e=Object(p.a)(["\n  margin-top: 20px;\n  margin-bottom: 20px;\n"]);return $n=function(){return e},e}function Qn(e,t){return t[e]}function Xn(e,t){var n,r=!0,a=Object(pe.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;e.toLowerCase().includes(i)||(r=!1)}}catch(o){a.e(o)}finally{a.f()}return r}function Zn(e,t){var n=t.filter((function(e){return e.state>0})).map((function(e){return e.label.fullName})),r=t.filter((function(e){return e.state<0})).map((function(e){return e.label.fullName})),a=n.every((function(t){return ct(t,e)})),i=r.some((function(t){return ct(t,e)}));return a&&!i}var er=Object(E.a)(En.a)($n()),tr=E.a.div(Yn()),nr=Object(E.a)(Sn.a)(Jn()),rr=i.a.forwardRef((function(e,t){var n,i=e.entries,o=e.labels,c=e.onEnterEntry,s=Object(a.useState)(i.slice(0,20)),l=Object(d.a)(s,2),u=l[0],f=l[1],p=Object(a.useState)({totalMatchingEntries:i.length}),b=Object(d.a)(p,2),h=b[0],j=b[1],m=Object(a.useState)(20),O=Object(d.a)(m,2),g=O[0],v=O[1],x=Object(a.useState)(-1),y=Object(d.a)(x,2),w=y[0],k=y[1],E=Object(a.useState)([]),S=Object(d.a)(E,2),C=S[0],N=S[1],L=Object(a.useState)([]),I=Object(d.a)(L,2),D=I[0],M=I[1],R=Object(a.useState)((n={},Object(he.a)(n,H.NoteMarkdown,!0),Object(he.a)(n,H.Document,!0),Object(he.a)(n,H.Link,!0),n)),T=Object(d.a)(R,2),U=T[0];T[1];F((function(){var e=function(e,t,n,r){var a,i=[],o=Object(pe.a)(e);try{for(o.s();!(a=o.n()).done;){var c=a.value,s=Qn(c.content.kind,r),l=Xn(c.title,t),u=Zn(c.labels,n);s&&l&&u&&i.push(c)}}catch(d){o.e(d)}finally{o.f()}return i}(i,C,D,U);j({totalMatchingEntries:e.length}),f(e.slice(0,g))}),100,[i,g,C,D,U]),Object(a.useEffect)((function(){i.length>0?k(0):k(-1)}),[i,C]);var A=Object(a.useCallback)((function(e,t){M((function(n){return function(e,t,n){var r=e.filter((function(e){return t.fullName!==e.label.fullName}));return 0!==n&&r.push({label:t,state:n}),r}(n,e,t)}))}),[M]),P=Object(a.useCallback)((function(){var e;null!=t&&("function"===typeof t?console.log("WARNING: ref is a function, cannot access value..."):null===(e=t.current)||void 0===e||e.focus())}),[t]);return Object(r.jsxs)(K,{children:[Object(r.jsx)(W,{center:Object(r.jsx)(er,{ref:function(e){null!=t&&("function"===typeof t?t(te(null===e||void 0===e?void 0:e.input)):t.current=te(null===e||void 0===e?void 0:e.input))},onChange:function(e){window.requestAnimationFrame((function(){N(e.target.value.split(/(\s+)/).map((function(e){return e.trim().toLowerCase()})).filter((function(e){return e.length>0})))}))},onKeyDown:function(e){switch(e.key){case"ArrowUp":e.preventDefault(),k(ne(u.length,w,-1));break;case"ArrowDown":e.preventDefault(),k(ne(u.length,w,1));break;case"Escape":break;case"Enter":-1!==w&&c(u[w].idx),e.preventDefault()}},autoFocus:!0})}),Object(r.jsx)(J,{left:Object(r.jsx)(le,{children:Object(r.jsx)(qn,{labels:o,onSetLabelFilter:A,onRegainFocus:P})}),center:Object(r.jsxs)(le,{children:[Object(r.jsx)(lr,{entries:u,highlighted:w,onEnterEntry:c}),h.totalMatchingEntries>u.length?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Cn.a,{justify:"center",children:Object(r.jsx)(nr,{type:"dashed",shape:"circle",onClick:function(e){v((function(e){return e+10<=h.totalMatchingEntries?e+10:h.totalMatchingEntries}))},children:Object(r.jsx)(Nn.a,{})})}),Object(r.jsx)(tr,{})]}):Object(r.jsx)(tr,{})]})})]})})),ar=E.a.div(Kn()),ir=E.a.div(Hn()),or=E.a.div(Wn()),cr=E.a.span(_n()),sr=E.a.span(Vn());var lr=i.a.memo((function(e){var t=e.entries,n=e.highlighted,a=e.onEnterEntry;return 0===t.length?Object(r.jsx)(Y.a,{image:Y.a.PRESENTED_IMAGE_SIMPLE,description:"No entries"}):Object(r.jsx)(ar,{children:t.map((function(e,t){return Object(r.jsxs)(ir,{className:t===n?"highlight-row":"",onClick:function(t){a(e.idx)},children:[Object(r.jsx)(or,{children:e.title}),Object(r.jsx)(cr,{children:Object(r.jsx)(de,{entryKind:e.content.kind,style:{fontSize:14}})}),Object(r.jsx)(sr,{children:(i=e.labels,i.map((function(e,t){return Object(r.jsx)(Dn,{children:e},e)})))})]},e.key);var i}))})})),ur=rr,dr=n(678),fr=n(680),pr=n(677);function br(){var e=Object(p.a)(['\n  // width: 100%;\n\n  pre {\n    font-family: "Ubuntu mono, monospace";\n    padding: 0.5rem 0.7rem;\n    font-size: 0.75rem; // 12 px\n    margin: 0.4rem 0;\n    width: 100%;\n  }\n  pre > code {\n    // width: 100%;\n    display: inline-block;\n  }\n\n  & :not(pre) > code {\n    background-color: whitesmoke;\n    color: #ff3860;\n    font-size: 0.875em;\n    font-weight: normal;\n    padding: 0.15em 0.4em 0.15em;\n    border: 1px solid #e0e0e0;\n  }\n']);return br=function(){return e},e}function hr(){var e=Object(p.a)(["\n  margin-top: 150px;\n  margin-bottom: 150px;\n"]);return hr=function(){return e},e}var jr=dr.a.Title,mr=fr.a.Panel,Or=E.a.div(hr()),gr={labelCol:{span:4},wrapperCol:{span:20}},vr={wrapperCol:{offset:4,span:20}};function xr(e){var t,n=e.entry,a=e.editForm;return Object(r.jsx)("div",{style:{marginTop:"20px",marginBottom:"20px"},children:Object(r.jsx)(fr.a,{defaultActiveKey:[],expandIconPosition:"right",expandIcon:function(){return Object(r.jsx)(Sn.a,{shape:"circle",icon:Object(r.jsx)(v.a,{})})},style:{background:"#f6fbfe",borderRadius:"4px"},children:Object(r.jsx)(mr,{header:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(jr,{level:3,children:n.title}),Object(r.jsx)("div",{children:(t=n.labels,t.map((function(e,t){return Object(r.jsx)(Dn,{children:e},e)})))}),Object(r.jsx)("div",{style:{marginTop:"10px",fontSize:"9px"},children:ht(n)?function(e){return Object(r.jsxs)("span",{children:["created on ",Ne(e.content.timeCreated),", updated on"," ",Ne(e.content.timeUpdated)]})}(n):jt(n)?function(e){if(e.content.referencedBy.length>0)return Object(r.jsxs)("div",{children:["Referenced by:",Object(r.jsx)("ul",{style:{paddingLeft:"20px"},children:e.content.referencedBy.map((function(e,t){return Object(r.jsx)("li",{children:e.title},t)}))})]})}(n):null})]}),children:a},0)})})}var yr=E.a.div(br());function wr(e){var t=e.entry,n=e.onUpdateNoteData;return Object(r.jsxs)(K,{children:[Object(r.jsx)(W,{center:Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(xr,{entry:t,editForm:Object(r.jsx)(kr,{initialTitle:t.title,initialLabels:t.labels,onUpdateNoteData:n})})})}),Object(r.jsx)(J,{center:Object(r.jsxs)(le,{children:[Object(r.jsx)(yr,{dangerouslySetInnerHTML:{__html:ht(t)?t.content.html:""}}),Object(r.jsx)(Or,{})]})})]})}var kr=function(e){var t=e.initialTitle,n=e.initialLabels,a=e.onUpdateNoteData;return Object(r.jsxs)(pr.a,Object(f.a)(Object(f.a)({},gr),{},{initialValues:{title:t,labels:n.join(" ")},onFinish:function(e){a(e.title,it(e.labels))},children:[Object(r.jsx)(pr.a.Item,{label:"Title",name:"title",rules:[{required:!0,message:"Note requires a title"}],style:{marginBottom:"16px"},children:Object(r.jsx)(En.a,{})}),Object(r.jsx)(pr.a.Item,{label:"Labels",name:"labels",style:{marginBottom:"16px"},children:Object(r.jsx)(En.a,{})}),Object(r.jsx)(pr.a.Item,Object(f.a)(Object(f.a)({},vr),{},{style:{marginBottom:0},children:Object(r.jsx)(Sn.a,{type:"primary",htmlType:"submit",children:"Update"})}))]}))};function Er(e){var t=e.entry,n=e.onUpdateNoteData,a=e.onOpenDocument;return Object(r.jsx)(K,{children:Object(r.jsx)(W,{center:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(xr,{entry:t,editForm:Object(r.jsx)(kr,{initialTitle:t.title,initialLabels:t.labels,onUpdateNoteData:n})}),Object(r.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:Object(r.jsx)(Sn.a,{autoFocus:!0,type:"primary",size:"large",style:{marginTop:"40px",display:"inline-block"},onClick:function(){return a(t)},children:Object(r.jsx)("div",{style:{marginLeft:"20px",marginRight:"20px"},children:"open"})})}),Object(r.jsx)(Or,{})]})})})}function Sr(e){var t=e.entry,n=e.onUpdateLinkData;return Object(r.jsx)(W,{center:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(xr,{entry:t,editForm:Object(r.jsx)(Nr,{linkTarget:t.content.target,initialTitle:t.title,initialLabels:t.content.ownLabels,onUpdateLinkData:n})}),Object(r.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:Object(r.jsx)(Sn.a,{href:t.content.target,target:"_blank",rel:"noreferrer noopener",autoFocus:!0,type:"primary",size:"large",style:{marginTop:"40px",display:"inline-block"},children:Object(r.jsx)("div",{style:{marginLeft:"20px",marginRight:"20px"},children:"open"})})}),Object(r.jsx)(Or,{})]}),style:{height:"100%"}})}var Cr=function(e){var t=e.entry,n=e.onUpdateNoteData,a=e.onUpdateLinkData,i=e.onOpenDocument;return null==t?Object(r.jsx)(oe,{}):ht(t)?Object(r.jsx)(wr,{entry:t,onUpdateNoteData:n}):bt(t)?Object(r.jsx)(Er,{entry:t,onUpdateNoteData:n,onOpenDocument:i}):jt(t)?Object(r.jsx)(Sr,{entry:t,onUpdateLinkData:a}):Object(r.jsx)(oe,{})},Nr=function(e){var t=e.linkTarget,n=e.initialTitle,i=e.initialLabels,o=e.onUpdateLinkData,c=pr.a.useForm(),s=Object(d.a)(c,1)[0],p=Object(a.useState)(!1),b=Object(d.a)(p,2),j=b[0],m=b[1];return Object(r.jsxs)(pr.a,Object(f.a)(Object(f.a)({},gr),{},{initialValues:{title:n,labels:i.join(" ")},form:s,onFinish:function(e){o(e.title,it(e.labels))},children:[Object(r.jsx)(pr.a.Item,{label:"Title",name:"title",rules:[{required:!0,message:"Note requires a title"}],style:{marginBottom:"16px"},children:Object(r.jsx)(En.a.Search,{enterButton:Object(r.jsxs)("span",{children:[j?Object(r.jsx)(w.a,{}):null," Fetch"]}),onSearch:Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,xn(t);case 4:null!=(n=e.sent)&&s.setFieldsValue({title:n}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),h.a.error({title:"Fetch failed",content:"Could not fetch the website title. This could be due to an unavailable link target, network errors, or the website is malformed."});case 12:return e.prev=12,m(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})))})}),Object(r.jsx)(pr.a.Item,{label:"Own labels",name:"labels",style:{marginBottom:"16px"},extra:"Links inherit labels from notes implicitly. This field allows to set additional explicit labels.",children:Object(r.jsx)(En.a,{})}),Object(r.jsx)(pr.a.Item,Object(f.a)(Object(f.a)({},vr),{},{style:{marginBottom:0},children:Object(r.jsx)(Sn.a,{type:"primary",htmlType:"submit",children:"Update"})}))]}))},Fr=n(181),Lr=n.n(Fr);function Ir(){var e=Object(p.a)(["\n  height: 100%;\n  /* Work-around for vertical overflow issue: https://github.com/microsoft/monaco-editor/issues/29 */\n  overflow: hidden;\n  /* background: #050; */\n"]);return Ir=function(){return e},e}var Dr=E.a.div(Ir()),Mr=Object(a.forwardRef)((function(e,t){var n=e.entry,i=e.settings,o=e.onEditorDidMount,c=Object(a.useRef)(void 0),s=function(e,t){c.current=t,o()};Object(a.useImperativeHandle)(t,(function(){return{getEditorContent:function(){var e;return null===(e=c.current)||void 0===e?void 0:e.getValue()},getScrollPosition:function(){var e;return null===(e=c.current)||void 0===e?void 0:e.getScrollTop()},setScrollPosition:function(e){var t;null===(t=c.current)||void 0===t||t.setScrollTop(e)},getCursorPosition:function(){var e,t;return null!=(t=null===(e=c.current)||void 0===e?void 0:e.getPosition())?t:void 0},setCursorPosition:function(e){var t;null===(t=c.current)||void 0===t||t.setPosition(e)},focus:function(){var e;null===(e=c.current)||void 0===e||e.focus()}}}));return Object(r.jsx)(W,{center:null!=n?function(e){return Object(r.jsx)(Dr,{children:Object(r.jsx)(Lr.a,{height:"100%",theme:i.theme,language:"markdown",value:mt(e),editorDidMount:s,options:{fontSize:i.fontSize,cursorBlinking:"smooth",wordWrap:i.wordWrap,wordWrapColumn:i.wordWrapColumn,minimap:{enabled:!1}}})})}(n):Object(r.jsx)(oe,{}),style:{height:"100%"}})})),Rr=n(676);function Tr(){var e=Object(p.a)(["\n  margin-top: 150px;\n  margin-bottom: 150px;\n"]);return Tr=function(){return e},e}function Ur(){var e=Object(p.a)(["\n  margin-top: 20px;\n"]);return Ur=function(){return e},e}function Ar(e){return e.map((function(e){switch(e.kind){case Ft.Write:return"updating ".concat(e.path);case Ft.Remove:return"removing ".concat(e.path);case Ft.Move:return"moving ".concat(e.pathSrc," to ").concat(e.pathDst);default:return Z(e),""}})).join("\n")}var Pr=[{title:Object(r.jsx)("b",{children:"Repository"}),dataIndex:"repo",key:"repo"},{title:Object(r.jsx)("b",{children:"Operation"}),dataIndex:"op",key:"op"},{title:Object(r.jsx)("b",{children:"File"}),dataIndex:"file",key:"file"}];function zr(e){var t=0;return e.flatMap((function(e,n){return n.map((function(n){return{key:++t,repo:e.name,op:n.kind,file:n.kind!==Ft.Move?Object(r.jsx)(Gr,{code:!0,children:n.path}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Gr,{code:!0,children:n.pathSrc})," to ",Object(r.jsx)(Gr,{code:!0,children:n.pathDst})]})}}))}))}var Br=dr.a.Title,Gr=dr.a.Text,qr=Object(E.a)(Br)(Ur()),Vr=E.a.div(Tr());var _r=function(e){var t=e.auth,n=e.ops,i=e.onSuccessfulCommit,o=Object(a.useState)(!1),c=Object(d.a)(o,2),s=c[0],f=c[1],p=function(){var e=Object(u.a)(l.a.mark((function e(){var a,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),a=n.flatMap((function(e,n){if(n.length>0){var r=Ar(n);return[jn(t,e,n,r).map((function(t){return{repo:e,commitHash:t}}))]}return[]})),e.next=4,Promise.all(a);case 4:o=e.sent,f(!1),c=o.filter((function(e){return e.isOk()})).map((function(e){return e._unsafeUnwrap()})),o.length===c.length?(h.a.success({title:"Success",content:Object(r.jsxs)(r.Fragment,{children:["Changes committed successfully:"," ",c.map((function(e){var t=e.repo,n=e.commitHash;return Object(r.jsx)("a",{href:ke(t,n),target:"_blank",rel:"noopener noreferrer",children:n.slice(0,7)})})).reduce((function(e,t){return[e,", ",t]}))]})}),i()):h.a.error({title:"Failure",content:"Failed to commit some changes. Do you have access to the repository?"});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(W,{center:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(qr,{level:4,children:"Staged changes"}),Object(r.jsx)(Rr.a,{bordered:!0,columns:Pr,dataSource:zr(n),pagination:!1,size:"small"}),Object(r.jsx)(Sn.a,{type:"primary",style:{marginTop:"20px"},loading:s,disabled:!(Object.keys(n).length>0),onClick:p,children:"Commit"}),Object(r.jsx)(Vr,{})]})})},Wr=n(186),Hr=n(684),Kr=n(134),Jr=Kr.a.Option;function Yr(e){var t=e.repos,n=e.value,a=e.onChange;return Object(r.jsx)(Kr.a,{value:null===n||void 0===n?void 0:n.name,onChange:function(e){var n=t.find((function(t){return t.name===e}));null!=n&&null!=a&&a(n)},children:t.map((function(e,t){return Object(r.jsx)(Jr,{value:e.name,children:e.name},t)}))})}var $r=Wr.a.TabPane,Qr={labelCol:{span:4},wrapperCol:{span:20}},Xr={wrapperCol:{offset:4,span:20}};function Zr(e){var t=e.entryKind,n=e.text;return Object(r.jsxs)("span",{style:{marginRight:"24px",userSelect:"none"},children:[Object(r.jsx)(de,{entryKind:t})," ",n]})}function ea(e){var t=e.repos,n=e.onAdded,a=pr.a.useForm(),i=Object(d.a)(a,1)[0],o={repo:we(t),title:"",labels:"",location:""};return Object(r.jsxs)(pr.a,Object(f.a)(Object(f.a)({},Qr),{},{initialValues:o,form:i,onFinish:function(e){var t=e.repo,r=e.title,a=e.labels,o=e.location;n({entryKind:H.NoteMarkdown,repo:t,title:r,labels:it(a),location:o,content:""}),i.resetFields()},requiredMark:!1,children:[Object(r.jsx)(pr.a.Item,{label:"Repository",name:"repo",rules:[{required:!0,message:"Repo is required"}],children:Object(r.jsx)(Yr,{repos:t})}),Object(r.jsx)(pr.a.Item,{label:"Title",name:"title",rules:[{required:!0,message:"Title is required"}],children:Object(r.jsx)(En.a,{placeholder:"Note title"})}),Object(r.jsx)(pr.a.Item,{label:"Folder path",name:"location",children:Object(r.jsx)(En.a,{placeholder:"Folder path"})}),Object(r.jsx)(pr.a.Item,{label:"Labels",name:"labels",children:Object(r.jsx)(En.a,{placeholder:"Labels"})}),Object(r.jsx)(pr.a.Item,Object(f.a)(Object(f.a)({},Xr),{},{style:{marginBottom:0},children:Object(r.jsx)(Sn.a,{type:"primary",htmlType:"submit",children:"Create"})}))]}))}function ta(e){var t=e.repos,n=e.onAdded,a=pr.a.useForm(),i=Object(d.a)(a,1)[0],o={repo:we(t),title:"",extension:"",location:"",labels:"",url:""},c=function(){var e=Object(u.a)(l.a.mark((function e(t){var r,a,o,c,s,u,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.repo,a=t.title,o=t.extension,c=t.location,s=t.labels,u=t.url,e.next=3,vn(u);case 3:d=e.sent,n({entryKind:H.Document,repo:r,title:a,extension:o,location:c,labels:it(s),content:d}),i.resetFields();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(pr.a,Object(f.a)(Object(f.a)({},Qr),{},{initialValues:o,form:i,onFinish:c,requiredMark:!1,children:[Object(r.jsx)(pr.a.Item,{label:"Repository",name:"repo",rules:[{required:!0,message:"Repo is required"}],children:Object(r.jsx)(Yr,{repos:t})}),Object(r.jsx)(pr.a.Item,{label:"Title",name:"title",rules:[{required:!0,message:"Title is required"}],children:Object(r.jsx)(En.a,{placeholder:"Document title"})}),Object(r.jsx)(pr.a.Item,{label:"File extension",name:"extension",rules:[{required:!0,message:"File extension is required"}],children:Object(r.jsx)(En.a,{placeholder:"File extension"})}),Object(r.jsx)(pr.a.Item,{label:"Folder path",name:"location",children:Object(r.jsx)(En.a,{placeholder:"Folder path"})}),Object(r.jsx)(pr.a.Item,{label:"Labels",name:"labels",children:Object(r.jsx)(En.a,{placeholder:"Labels"})}),Object(r.jsx)(pr.a.Item,{label:"Data URL",name:"url",rules:[{required:!0,message:"URL is required"}],children:Object(r.jsx)(En.a,{placeholder:"URL from which to download document"})}),Object(r.jsx)(pr.a.Item,Object(f.a)(Object(f.a)({},Xr),{},{style:{marginBottom:0},children:Object(r.jsx)(Sn.a,{type:"primary",htmlType:"submit",children:"Download & Create"})}))]}))}function na(e){var t=e.repos,n=e.onAdded,a=pr.a.useForm(),i=Object(d.a)(a,1)[0],o={repo:we(t),title:"",labels:"",url:""};return Object(r.jsxs)(pr.a,Object(f.a)(Object(f.a)({},Qr),{},{initialValues:o,form:i,onFinish:function(e){var t=e.repo,r=e.title,a=e.labels,o=e.url;n({entryKind:H.Link,repo:t,title:r,labels:it(a),content:o}),i.resetFields()},requiredMark:!1,children:[Object(r.jsx)(pr.a.Item,{label:"Repository",name:"repo",rules:[{required:!0,message:"Repo is required"}],children:Object(r.jsx)(Yr,{repos:t})}),Object(r.jsx)(pr.a.Item,{label:"Title",name:"title",rules:[{required:!0,message:"Title is required"}],children:Object(r.jsx)(En.a,{placeholder:"Bookmark title"})}),Object(r.jsx)(pr.a.Item,{label:"Labels",name:"labels",children:Object(r.jsx)(En.a,{placeholder:"Labels"})}),Object(r.jsx)(pr.a.Item,{label:"Bookmark URL",name:"url",rules:[{required:!0,message:"URL is required"}],children:Object(r.jsx)(En.a,{placeholder:"Bookmark target URL"})}),Object(r.jsx)(pr.a.Item,Object(f.a)(Object(f.a)({},Xr),{},{style:{marginBottom:0},children:Object(r.jsx)(Sn.a,{type:"primary",htmlType:"submit",children:"Create"})}))]}))}var ra=function(e){var t=e.onAdded,n=e.repos;return Object(r.jsx)(W,{center:Object(r.jsx)(Hr.a,{style:{marginTop:"20px",marginBottom:"20px"},children:Object(r.jsxs)(Wr.a,{defaultActiveKey:"1",children:[Object(r.jsx)($r,{tab:Object(r.jsx)(Zr,{entryKind:H.NoteMarkdown,text:"Note"}),children:Object(r.jsx)(ea,{onAdded:t,repos:n})},"note"),Object(r.jsx)($r,{tab:Object(r.jsx)(Zr,{entryKind:H.Document,text:"Document"}),children:Object(r.jsx)(ta,{onAdded:t,repos:n})},"doc"),Object(r.jsx)($r,{tab:Object(r.jsx)(Zr,{entryKind:H.Link,text:"Bookmark"}),children:Object(r.jsx)(na,{onAdded:t,repos:n})},"link")]})})})},aa=n(688),ia=n(73),oa=n(689),ca=n(685),sa=n(674),la=n(686),ua=n(696),da=n(698),fa=n(699),pa=n(700);function ba(){var e=Object(p.a)(["\n  font-size: 16px;\n"]);return ba=function(){return e},e}var ha=Kr.a.Option,ja=E.a.span(ba());function ma(e){return Object(r.jsx)(aa.b,{children:Object(r.jsxs)(Cn.a,{wrap:!1,align:"middle",gutter:8,children:[Object(r.jsx)(ia.a,{flex:"auto",children:Object(r.jsx)(ua.a,{style:{fontSize:"24px",color:"#666"}})}),Object(r.jsx)(ia.a,{flex:"auto",children:Object(r.jsx)(ja,{children:e.name})})]})})}var Oa={justify:"end",align:"middle",gutter:[8,16]};function ga(e){var t=e.text,n=e.children;return Object(r.jsxs)(Cn.a,Object(f.a)(Object(f.a)({},Oa),{},{children:[null!=t?Object(r.jsx)(ia.a,{children:t}):null,Object(r.jsx)(ia.a,{span:20,children:n})]}))}function va(e){var t=e.repo,n=e.auth,a=e.onDelete,i=e.onEdited,o=e.onMakeDefault;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ga,{text:"Name:",children:Object(r.jsx)(En.a,{placeholder:"Name within Notemarks",value:t.name,onChange:function(e){return i(Object(f.a)(Object(f.a)({},t),{},{name:e.target.value}))}})}),Object(r.jsx)(ga,{text:"User/Organization:",children:Object(r.jsx)(En.a,{placeholder:"GitHub repository user/organization",value:t.userOrOrgName,onChange:function(e){return i(Object(f.a)(Object(f.a)({},t),{},{userOrOrgName:e.target.value}))}})}),Object(r.jsx)(ga,{text:"Repository:",children:Object(r.jsx)(En.a,{placeholder:"GitHub repository name",value:t.repoName,onChange:function(e){return i(Object(f.a)(Object(f.a)({},t),{},{repoName:e.target.value}))}})}),Object(r.jsx)(ga,{text:"Enabled:",children:Object(r.jsx)(oa.a,{checked:t.enabled,onChange:function(e){return i(Object(f.a)(Object(f.a)({},t),{},{enabled:e}))}})}),Object(r.jsx)(ga,{text:"Default:",children:Object(r.jsx)(oa.a,{checked:t.default,onChange:o})}),Object(r.jsx)(ga,{children:Object(r.jsxs)(Cn.a,{justify:"space-between",children:[Object(r.jsx)(ia.a,{children:Object(r.jsx)(Sn.a,{type:"primary",onClick:Object(u.a)(l.a.mark((function e(){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(Object(f.a)(Object(f.a)({},t),{},{verified:fe.inProgress})),e.next=3,nn(t,n);case 3:r=e.sent,i(Object(f.a)(Object(f.a)({},t),{},{verified:r?fe.success:fe.failed}));case 5:case"end":return e.stop()}}),e)}))),children:"Verify Access"})}),Object(r.jsx)(ia.a,{children:Object(r.jsx)(Sn.a,{danger:!0,onClick:a,children:"Delete"})})]})})]})}function xa(e){var t=e.auth,n=e.repos,i=e.setRepos,o=Object(a.useCallback)((function(){var e=ve(0===n.length);i([].concat(Object(be.a)(n),[e]))}),[n,i]);return Object(r.jsxs)(r.Fragment,{children:[n.map((function(e,a){return Object(r.jsx)(Cn.a,{gutter:[24,24],children:Object(r.jsx)(ia.a,{span:24,children:Object(r.jsx)(Hr.a,{title:ma(e),size:"small",hoverable:!0,extra:Object(r.jsx)(ka,{status:e.verified}),children:Object(r.jsx)(va,{repo:e,auth:t,onDelete:function(){return function(e){var t=Object(be.a)(n);t.splice(e,1),i(t)}(a)},onEdited:function(e){return function(e,t){var r=Object(be.a)(n);r[e]=t,i(r)}(a,e)},onMakeDefault:function(){return function(e){for(var t=Object(be.a)(n),r=0;r<t.length;++r)t[r].default=r===e;i(t)}(a)}})})})},e.key)})),Object(r.jsx)(Cn.a,{justify:"center",children:Object(r.jsx)(ia.a,{children:Object(r.jsxs)(Sn.a,{type:"dashed",size:"large",onClick:o,children:[Object(r.jsx)(x.a,{})," Add Repository"]})})})]})}function ya(e){var t=e.settings,n=e.setSettings;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ga,{text:"GitHub access token:",children:Object(r.jsx)(En.a.Password,{placeholder:"GitHub access token",defaultValue:t.tokenGitHub,onChange:function(e){return n(Object(f.a)(Object(f.a)({},t),{},{tokenGitHub:e.target.value}))}})}),Object(r.jsx)(ga,{children:Object(r.jsxs)("div",{style:{fontSize:12,color:"#666"},children:["For more information refer to the"," ",Object(r.jsx)("a",{href:"https://github.com/notemarks/notemarks#GitHubAuthentication",target:"_blank",rel:"noopener noreferrer",children:"GitHub authentication documentation"}),"."]})})]})}function wa(e){var t=e.settings,n=e.setSettings;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ga,{text:"Font size:",children:Object(r.jsx)(ca.a,{placeholder:"Font size",defaultValue:t.fontSize,onChange:function(e){"number"===typeof e&&n(Object(f.a)(Object(f.a)({},t),{},{fontSize:e}))},style:{width:"100%"}})}),Object(r.jsx)(ga,{text:"Theme:",children:Object(r.jsxs)(Kr.a,{defaultValue:t.theme,onChange:function(e){return n(Object(f.a)(Object(f.a)({},t),{},{theme:e}))},style:{width:"100%"},children:[Object(r.jsx)(ha,{value:"dark",children:"dark"}),Object(r.jsx)(ha,{value:"light",children:"light"})]})}),Object(r.jsx)(ga,{text:"Word wrap",children:Object(r.jsxs)(Kr.a,{defaultValue:t.wordWrap,onChange:function(e){return n(Object(f.a)(Object(f.a)({},t),{},{wordWrap:e}))},style:{width:"100%"},children:[Object(r.jsx)(ha,{value:"bounded",children:"on (wrap on both viewport and word wrap column)"}),Object(r.jsx)(ha,{value:"wordWrapColumn",children:"on (wrap on word wrap column)"}),Object(r.jsx)(ha,{value:"on",children:"on (wrap on viewport)"}),Object(r.jsx)(ha,{value:"off",children:"off"})]})}),Object(r.jsx)(ga,{text:"Word wrap column:",children:Object(r.jsx)(ca.a,{placeholder:"Word wrap column",defaultValue:t.wordWrapColumn,onChange:function(e){"number"===typeof e&&n(Object(f.a)(Object(f.a)({},t),{},{wordWrapColumn:e}))},style:{width:"100%"}})})]})}function ka(e){var t=e.status;return t===fe.unknown?Object(r.jsx)(da.a,{twoToneColor:"#e6e6e6",style:{fontSize:"24px"}}):t===fe.failed?Object(r.jsx)(fa.a,{twoToneColor:"#eb2f96",style:{fontSize:"24px"}}):t===fe.success?Object(r.jsx)(pa.a,{twoToneColor:"#2be262",style:{fontSize:"24px"}}):Object(r.jsx)(w.a,{style:{fontSize:"24px"}})}function Ea(e){return e.isAuthenticatedSession?null:Object(r.jsx)(la.a,{message:"Temporary session",type:"warning",showIcon:!0,description:Object(r.jsxs)("div",{children:["This session has been started without a local encryption password. For security reasons none of the settings changes below will be persisted into the browser's local storage. If you want your browser to remember these settings, you can start a"," ",Object(r.jsx)("a",{href:"./",target:"_blank",rel:"noopener noreferrer",children:"new session"})," ","with a local encryption password."]}),style:{marginTop:"20px"}})}var Sa=function(e){var t=e.settings,n=e.dispatch,a=e.isAuthenticatedSession;return Object(r.jsx)(W,{center:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ea,{isAuthenticatedSession:a}),Object(r.jsx)(sa.a,{orientation:"left",children:"Repositories"}),Object(r.jsx)(xa,{auth:t.auth,repos:t.repos,setRepos:function(e){return n({repos:e})}}),Object(r.jsx)(sa.a,{orientation:"left",children:"Authentication"}),Object(r.jsx)(ya,{settings:t.auth,setSettings:function(e){return n({auth:e})}}),Object(r.jsx)(sa.a,{orientation:"left",children:"Editor Settings"}),Object(r.jsx)(wa,{settings:t.editor,setSettings:function(e){return n({editor:e})}}),Object(r.jsx)(sa.a,{orientation:"left",children:"Browser cache"}),Object(r.jsx)(ga,{children:Object(r.jsx)(Sn.a,{danger:!0,onClick:It,children:"Clear all cache data"})})]})})};function Ca(){var e=Object(p.a)(["\n  background: #fff;\n"]);return Ca=function(){return e},e}var Na,Fa=b.a.Content,La=Object(E.a)(Fa)(Ca());Mousetrap.prototype.stopCallback=function(e,t,n){return"INPUT"===t.tagName&&"Enter"===e.key},window.onbeforeunload=function(){return"Are you sure you want to navigate away? Uncommitted modifications will be lost."},function(e){e.Main="Main",e.Settings="Settings",e.EntryView="NoteView",e.NoteEditor="NoteEditor",e.Commit="Commit",e.Reload="Reload",e.Add="Add"}(Na||(Na={}));var Ia,Da={},Ma={},Ra={handleSwitchEdit:function(){},handleSearch:function(){}};function Ta(e,t,n,r){var a=e.findIndex((function(e){return e.key===n.key}));if(-1!==a){var i=e.slice(0);i[a]=r;var o=Et(i,t),c=Object(d.a)(o,2),s=c[0],l=c[1],u=l.findIndex((function(e){return e===r}));if(-1!==u)return[i,s,l,u];console.log("Logic error: Active entry has disappeared.")}else console.log("Illegal update: Could not find a file entry for entry key "+n.key)}function Ua(e,t){var n,r=e.content.repo,a=_e(e);null===(n=t.get(r))||void 0===n||n.data.setContent(a,e.content.text)}function Aa(e,t){ht(e)?Ua(e,t):bt(e)&&function(e,t){var n,r=e.content.repo,a=_e(e);null!=e.content.stagedData&&(null===(n=t.get(r))||void 0===n||n.data.setContent(a,e.content.stagedData))}(e,t)}function Pa(e,t){var n,r=Le(yt(e)),a=e.content.repo,i=We(e).metaPath;null===(n=t.get(a))||void 0===n||n.data.setContent(i,r)}function za(e,t){switch(t.kind){case Ia.SwitchToPage:return Object(f.a)(Object(f.a)({},e),{},{page:t.page});case Ia.SwitchToEntryViewOnIdx:return Object(f.a)(Object(f.a)({},e),{},{page:Na.EntryView,activeEntryIdx:t.idx});case Ia.StartReloading:return Object(f.a)(Object(f.a)({},e),{},{isReloading:!0});case Ia.ReloadingDone:return Object(f.a)(Object(f.a)({},e),{},{isReloading:!1,entries:t.entries,fileEntries:t.fileEntries,linkEntries:t.linkEntries,labels:t.labels,allFileMapsOrig:t.allFileMapsOrig,allFileMapsEdit:t.allFileMapsEdit,stagedGitOps:t.stagedGitOps});case Ia.UpdateNoteContent:if(null==e.activeEntryIdx)return console.log("Illegal update: UpdateNoteContent called without an active entry."),e;var n=e.entries[e.activeEntryIdx];if(!ht(n))return console.log("Illegal update: UpdateNoteContent called when active entry wasn't a note."),e;if(t.content!==n.content.text){var r=rt(t.content),a=Object(d.a)(r,2),i=a[0],o=a[1],c=pt(Object(f.a)(Object(f.a)({},n),{},{content:Object(f.a)(Object(f.a)({},n.content),{},{text:t.content,html:i,links:o,timeUpdated:Fe()})})),s=Ta(e.fileEntries,e.linkEntries,n,c);if(null==s)return e;var l=Object(d.a)(s,4),u=l[0],p=l[1],b=l[2],h=l[3],j=e.allFileMapsEdit.clone();Ua(c,j),Pa(c,j),xt(p,j);var m=Qt(e.allFileMapsOrig,j);return Object(f.a)(Object(f.a)({},e),{},{activeEntryIdx:h,entries:b,fileEntries:u,linkEntries:p,allFileMapsEdit:j,stagedGitOps:m})}return e;case Ia.UpdateEntryMeta:if(null==e.activeEntryIdx)return console.log("Illegal update: UpdateEntryMeta called without an active entry."),e;var O=e.entries[e.activeEntryIdx];if(ht(O)){var g=O.title,v=t.title,x=g!==v,y=!ot(O.labels.slice(0),t.labels);if(x||y){var w,k,E,S,C=pt(Object(f.a)(Object(f.a)({},O),{},{title:v,labels:t.labels})),N=Ta(e.fileEntries,e.linkEntries,O,C);if(null==N)return e;var F=Object(d.a)(N,4),L=F[0],I=F[1],D=F[2],M=F[3],R=e.allFileMapsEdit.clone(),T=C.content.repo,U=We(O),A=We(C),P=yt(C),z=C.content.text,B=Le(P);null===(w=R.get(T))||void 0===w||w.data.delete(U.path),null===(k=R.get(T))||void 0===k||k.data.delete(U.metaPath),null===(E=R.get(T))||void 0===E||E.data.setContent(A.path,z),null===(S=R.get(T))||void 0===S||S.data.setContent(A.metaPath,B);var G=Qt(e.allFileMapsOrig,R);return Object(f.a)(Object(f.a)({},e),{},{activeEntryIdx:M,entries:D,fileEntries:L,linkEntries:I,allFileMapsEdit:R,stagedGitOps:G,labels:dt(D)})}return e}return e;case Ia.UpdateLinkEntryMeta:var q=e.entries[e.activeEntryIdx];if(jt(q)){var V=q.title,_=t.title,W=q.content.ownLabels.slice(0),K=t.ownLabels,J=V!==_,Y=!ot(W,K);if(J||Y){var $=pt(Object(f.a)(Object(f.a)({},q),{},{title:_,content:Object(f.a)(Object(f.a)({},q.content),{},{ownLabels:K})})),Q=function(e,t,n,r){var a=t.findIndex((function(e){return e.key===n.key}));if(-1!==a){var i=t.slice(0);i[a]=r;var o=Et(e,i),c=Object(d.a)(o,2),s=c[0],l=c[1],u=l.findIndex((function(e){return e===r}));if(-1!==u)return[s,l,u];console.log("Logic error: Active entry has disappeared.")}else console.log("Illegal update: Could not find a link entry for entry key "+n.key)}(e.fileEntries,e.linkEntries,q,$);if(null==Q)return e;var X=Object(d.a)(Q,3),ee=X[0],te=X[1],ne=X[2],re=e.allFileMapsEdit.clone();xt(ee,re);var ae=Qt(e.allFileMapsOrig,re);return Object(f.a)(Object(f.a)({},e),{},{activeEntryIdx:ne,entries:te,linkEntries:ee,allFileMapsEdit:re,stagedGitOps:ae,labels:dt(te)})}return e}return e;case Ia.CreateEntry:var ie=e.allFileMapsEdit.clone(),oe=function(e,t,n,r){var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t},i=r.entryKind===H.NoteMarkdown?function(){var i=e.slice(0),o=Fe(),c=pt({title:r.title,priority:0,labels:r.labels,content:{kind:H.NoteMarkdown,repo:r.repo,location:r.location,extension:"md",timeCreated:o,timeUpdated:o,text:"",html:"",links:[]}});i.push(c);var s=Et(i,t),l=Object(d.a)(s,2),u=l[0],f=l[1];return Aa(c,n),Pa(c,n),a(i,u,f,c)}():r.entryKind===H.Document?function(){var i=e.slice(0),o=Fe(),c=pt({title:r.title,priority:0,labels:r.labels,content:{kind:H.Document,repo:r.repo,location:r.location,extension:r.extension,timeCreated:o,timeUpdated:o,stagedData:r.content}});i.push(c);var s=Et(i,t),l=Object(d.a)(s,2),u=l[0],f=l[1];return Aa(c,n),Pa(c,n),a(i,u,f,c)}():function(){var i=e,o=t.slice(0),c=pt({title:r.title,priority:0,labels:r.labels,content:{kind:H.Link,target:r.content,referencedBy:[],standaloneRepo:r.repo,refRepos:[],refLocations:[],ownLabels:r.labels}});o.push(c);var s=Et(i,o),l=Object(d.a)(s,2),u=l[0],f=l[1];return xt(u,n),a(i,u,f,c)}(),o=Object(d.a)(i,4),c=o[0],s=o[1],l=o[2],u=o[3],f=l.findIndex((function(e){return e===u}));return-1===f&&(console.log("Logic error: New entry has disappeared."),f=void 0),xt(s,n),[c,s,l,f]}(e.fileEntries,e.linkEntries,ie,t),ce=Object(d.a)(oe,4),se=ce[0],le=ce[1],ue=ce[2],de=ce[3];return Object(f.a)(Object(f.a)({},e),{},{activeEntryIdx:de,page:Na.EntryView,entries:ue,fileEntries:se,linkEntries:le,allFileMapsEdit:ie,stagedGitOps:Qt(e.allFileMapsOrig,ie),labels:dt(ue)});case Ia.SuccessfulCommit:return Object(f.a)(Object(f.a)({},e),{},{allFileMapsOrig:e.allFileMapsEdit.clone(),stagedGitOps:new $t});default:Z(t)}}C.a.bind(["command+e","ctrl+e"],(function(){return Ra.handleSwitchEdit(),!1})),C.a.bind(["command+p","ctrl+p"],(function(){return Ra.handleSearch(),!1})),function(e){e.SwitchToPage="SwitchToPage",e.SwitchToEntryViewOnIdx="SwitchToEntryViewOnIdx",e.StartReloading="StartReloading",e.ReloadingDone="ReloadingDone",e.UpdateNoteContent="UpdateNoteContent",e.UpdateEntryMeta="UpdateEntryMeta",e.UpdateLinkEntryMeta="UpdateLinkEntryMeta",e.CreateEntry="CreateEntry",e.SuccessfulCommit="SuccessfulCommit"}(Ia||(Ia={}));var Ba=function(e){var t=e.initSettings,n=e.session;console.log("Rendering: App"),N((function(){f(t.repos)}));var i=Object(a.useReducer)(Nt,t),o=Object(d.a)(i,2),c=o[0],s=o[1];function f(e){return p.apply(this,arguments)}function p(){return(p=Object(u.a)(l.a.mark((function e(t){var n,r,a,i,o,s,u,f,p,b,j,m,O;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Reloading entries"),L({kind:Ia.StartReloading}),n=ye(t),e.next=5,pn(n,c.auth);case 5:r=e.sent,a=Object(d.a)(r,4),i=a[0],o=a[1],s=a[2],(u=a[3]).length>0&&h.a.error({title:"Reload errors",content:"There were ".concat(u.length," request errors. Check console log for details.")}),f=vt(o),p=Et(i,f),b=Object(d.a)(p,2),j=b[0],m=b[1],xt(j,s),O=Qt(o,s),L({kind:Ia.ReloadingDone,entries:m,fileEntries:i,linkEntries:j,labels:dt(m),allFileMapsOrig:o,allFileMapsEdit:s,stagedGitOps:O});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}F((function(){n.isAuthenticated()&&n.storeSettings(c)}),300,[n,c]);var E=Object(a.useReducer)(za,{entries:[],fileEntries:[],linkEntries:[],labels:[],isReloading:!1,activeEntryIdx:void 0,page:Na.Main,stagedGitOps:new $t,allFileMapsOrig:new Ye,allFileMapsEdit:new Ye}),S=Object(d.a)(E,2),C=S[0],L=S[1],I=function(){if(null!=C.activeEntryIdx)return C.entries[C.activeEntryIdx]},D=function(){var e=I();return null!=e&&ht(e)},M=function(){return C.stagedGitOps.map((function(e,t){return t.length})).reduce((function(e,t){return e+t}),0)>0},R=Object(a.useRef)(null),T=Object(a.useRef)(null),U=function(){var e=I();null!=e&&(Da[e.key]=document.documentElement.scrollTop||document.body.scrollTop)},A=function(e){switch(e){case Na.EntryView:U(),function(){var e=I();null!=e&&e.key in Ma&&(z.current=Ma[e.key])}();break;case Na.NoteEditor:!function(){var e=I();if(null!=e&&null!=R.current){var t=R.current.getScrollPosition(),n=R.current.getCursorPosition();Ma[e.key]={scroll:t,cursor:n}}}(),function(){var e=I();null!=e&&e.key in Da&&(P.current=Da[e.key])}(),function(){if(null!=R.current){var e=R.current.getEditorContent();null!=e&&L({kind:Ia.UpdateNoteContent,content:e})}}()}};Ra.handleSwitchEdit=function(){C.page===Na.EntryView&&D()?(A(C.page),L({kind:Ia.SwitchToPage,page:Na.NoteEditor})):C.page===Na.NoteEditor&&D()?(A(C.page),L({kind:Ia.SwitchToPage,page:Na.EntryView})):console.log("Switching not possible")},Ra.handleSearch=function(){C.page!==Na.Main?L({kind:Ia.SwitchToPage,page:Na.Main}):null!=T.current&&T.current.focus()};var P=Object(a.useRef)(null),z=Object(a.useRef)(null);Object(a.useLayoutEffect)((function(){var e;null!=P.current&&(e=P.current,document.documentElement.scrollTop=document.body.scrollTop=e,P.current=null)}));var B=function(){if(null!=z.current){var e,t;if(null!=z.current.scroll)null===(e=R.current)||void 0===e||e.setScrollPosition(z.current.scroll);if(null!=z.current.cursor)null===(t=R.current)||void 0===t||t.setCursorPosition(z.current.cursor);z.current=null}window.requestAnimationFrame((function(){var e;null===(e=R.current)||void 0===e||e.focus()}))};return Object(r.jsxs)(b.a,{style:{height:"100%"},children:[Object(r.jsx)(W,{center:Object(r.jsxs)(j.a,{theme:"dark",mode:"horizontal",selectedKeys:[C.page],onClick:function(e){var t=e.key;switch(t){case Na.Reload:C.isReloading||(!1===M()?f(c.repos):h.a.confirm({title:"Do you want to reload entries?",icon:Object(r.jsx)(m.a,{}),content:"You have uncommitted changes. Reloading the repository content will discard local changes.",onOk:function(){f(c.repos)}}));break;default:A(C.page),L({kind:Ia.SwitchToPage,page:t})}},children:[Object(r.jsx)(j.a.Item,{icon:Object(r.jsx)(O.a,{style:{fontSize:16}}),title:"Overview"},Na.Main),Object(r.jsx)(j.a.Item,{icon:Object(r.jsx)(g.a,{style:{fontSize:16}}),title:"Entry Viewer",disabled:null==C.activeEntryIdx},Na.EntryView),Object(r.jsx)(j.a.Item,{icon:Object(r.jsx)(v.a,{style:{fontSize:16}}),title:"Editor",disabled:!D()},Na.NoteEditor),Object(r.jsx)(j.a.Item,{icon:Object(r.jsx)(x.a,{style:{fontSize:16}}),title:"Add new entry"},Na.Add),Object(r.jsx)(j.a.Item,{icon:Object(r.jsx)(ue,{status:!0===M()}),title:"Commit staged changes"},Na.Commit),Object(r.jsx)(j.a.Item,{icon:C.isReloading?Object(r.jsx)(w.a,{style:{fontSize:16}}):Object(r.jsx)(y.a,{style:{fontSize:16}}),title:"Reload entries"},Na.Reload),Object(r.jsx)(j.a.Item,{icon:Object(r.jsx)(k.a,{style:{fontSize:16}}),title:"Settings"},Na.Settings)]}),style:{background:"#001529"}}),Object(r.jsx)(La,{children:function(){switch(C.page){case Na.Main:return Object(r.jsx)(ur,{ref:T,entries:C.entries,labels:C.labels,onEnterEntry:function(e){L({kind:Ia.SwitchToEntryViewOnIdx,idx:e})}});case Na.EntryView:return Object(r.jsx)(Cr,{entry:I(),onUpdateNoteData:function(e,t){L({kind:Ia.UpdateEntryMeta,title:e,labels:t})},onUpdateLinkData:function(e,t){L({kind:Ia.UpdateLinkEntryMeta,title:e,ownLabels:t})},onOpenDocument:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hn(t,c.auth,!1);case 2:(n=e.sent).isOk()&&(r=Ve(t),a=t.content.extension,yn(r,a,n.value));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case Na.NoteEditor:return Object(r.jsx)(Mr,{entry:I(),settings:c.editor,ref:R,onEditorDidMount:B});case Na.Commit:return Object(r.jsx)(_r,{auth:c.auth,ops:C.stagedGitOps,onSuccessfulCommit:function(){L({kind:Ia.SuccessfulCommit})}});case Na.Add:return Object(r.jsx)(ra,{repos:ye(c.repos),onAdded:function(e){var t=e.entryKind,n=e.repo,r=e.title,a=e.labels,i=e.content,o=e.location,c=e.extension;L({kind:Ia.CreateEntry,entryKind:t,repo:n,title:r,labels:a,content:i,location:o,extension:c})}});case Na.Settings:return Object(r.jsx)(Sa,{settings:c,dispatch:s,isAuthenticatedSession:n.isAuthenticated()})}}()})]})},Ga=n(135),qa=n(706);var Va=function(e){var t=e.anyAuthStored,n=e.onLogin,i=Object(a.useState)(!1),o=Object(d.a)(i,2),c=o[0],s=o[1],f=function(){var e=Object(u.a)(l.a.mark((function e(r){var a,i,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,zt(r.password);case 4:return a=e.sent,i=r.reset,o=new Lt(a),e.next=9,o.loadSettings(i);case 9:c=e.sent,t&&c.status.loadAuthFailed?h.a.error({title:"Failure",content:"Failed to decrypt local data. Password mismatch?"}):setTimeout((function(){n(c.settings,o)}),0);case 11:return e.prev=11,s(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,,11,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(h.a,{visible:!0,title:Object(r.jsxs)("span",{style:{fontSize:20},children:[Object(r.jsx)("img",{src:"./favicon.ico",alt:"logo",style:{height:"32px",marginRight:"8px"}}),"notemarks"]}),closable:!1,footer:null,children:[Object(r.jsx)(la.a,{message:"Welcome to notemarks!",description:Object(r.jsxs)("span",{children:[Object(r.jsx)("p",{children:"Notemarks is a git based labeling app to manage notes, documents, and bookmarks. If you are new to notemarks you may want to:"}),Object(r.jsxs)("ul",{style:{marginBottom:0},children:[Object(r.jsx)("li",{children:Object(r.jsxs)("p",{style:{marginBottom:"0.5em"},children:["Try the"," ",Object(r.jsx)("a",{href:"https://notemarks.app/#demo-tutorial",target:"_blank",rel:"noopener noreferrer",children:"tutorial."})]})}),Object(r.jsxs)("li",{children:["Visit the"," ",Object(r.jsx)("a",{href:"https://github.com/notemarks/notemarks",target:"_blank",rel:"noopener noreferrer",children:"project page"})," ","for more information."]})]})]}),type:"info"}),Object(r.jsx)(sa.a,{}),Object(r.jsxs)(pr.a,{initialValues:{reset:!t,password:""},onFinish:f,children:[Object(r.jsx)(pr.a.Item,{name:"password",validateTrigger:"onBlur",rules:[function(){return{validator:function(e,t){return null!=t&&t.length>=4?Promise.resolve():Promise.reject("Local encryption password should have at least 4 characters.")}}}],children:Object(r.jsx)(En.a.Password,{prefix:Object(r.jsx)(qa.a,{}),type:"password",placeholder:"Local encryption password",autoFocus:!0})}),Object(r.jsx)(pr.a.Item,{name:"reset",valuePropName:"checked",children:Object(r.jsx)(Ga.a,{children:"Reset local encryption password"})}),Object(r.jsx)(pr.a.Item,{style:{marginBottom:0},children:Object(r.jsx)(Sn.a,{type:"primary",htmlType:"submit",loading:c,children:"Start"})})]}),Object(r.jsx)(sa.a,{}),Object(r.jsxs)("div",{style:{fontSize:12,marginTop:"8px",color:"#666"},children:[Object(r.jsx)("p",{children:"What is the purpose of the local encryption password?"}),"To enhance security, notemarks stores data in the browser cache with encryption. The password does not refer to any account, i.e., no sign-up is required. You can choose and reset the password at will. Losing or resetting the password will only mean that you'll have to reconfigure the GitHub authentication setting of the app on this particular client. For more information check the"," ",Object(r.jsx)("a",{href:"https://github.com/notemarks/notemarks#GitHubAuthentication",target:"_blank",rel:"noopener noreferrer",children:"GitHub authentication"})," ","section in the readme."]})]})};function _a(){var e,t,n,r=window.location.hash;if(r=r.replace(/^#+/g,""),console.log(r),"demo-awesome"===r||"demo-tutorial"===r){var a=Ct();return a.repos=[(e="Awesome",t="notemarks",n=r,{key:Object(ge.a)(),name:e,userOrOrgName:t,repoName:n,enabled:!0,default:!0,verified:fe.success})],{skipLogin:!0,settings:a}}return{skipLogin:!1}}var Wa=function(){var e=Object(a.useState)({mode:"none"}),t=Object(d.a)(e,2),n=t[0],i=t[1];switch(N((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Initial load"),!1!==(t=_a()).skipLogin){e.next=10;break}return e.next=5,Jt();case 5:n=e.sent,wn(),i({mode:"login",anyAuthStored:n}),e.next=13;break;case 10:r=new Lt,kn(),i({mode:"app",initialSettings:t.settings,session:r});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()})),n.mode){case"none":return null;case"login":return Object(r.jsx)(Va,{anyAuthStored:n.anyAuthStored,onLogin:function(e,t){i({mode:"app",initialSettings:e,session:t})}});case"app":return Object(r.jsx)(Ba,{initSettings:n.initialSettings,session:n.session})}},Ha=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,707)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))};c.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(Wa,{})}),document.getElementById("root")),Ha()}},[[670,1,2]]]);
//# sourceMappingURL=main.2736863e.chunk.js.map